<!DOCTYPE html>
<head>
	<title>Does it works?</title>
    <meta charset="utf-8">
	<link rel="icon" href="https://angularjs.org/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="main.css">
	
	<script src="angular.1.4.0-rc.0.js" type="text/javascript"></script>
	<script src="angular-animate.1.4.0-rc.0.js" type="text/javascript"></script>
	<script src="angular-resource.1.4.0.js" type="text/javascript"></script>
	
	<script src="currency-form-controller.js" type="text/javascript"></script>
	<script src="dropdown-directive.js" type="text/javascript"></script>
	<script src="app-filters.js" type="text/javascript"></script>
	
	<script>
		// пререндер откуда-то из нёдр бекенда
		currencies = {
			99 : { name: 'All', id: 99 },
			0  : { name: 'EUR', id: 0 },
			1  : { name: 'USD', id: 1 },
			2  : { name: 'GBP', id: 2 }
		}
	
		app = angular.module('testCases', [ 'ngAnimate', 'ngResource', 'App.filters']);
		app.controller('currencyForm', currencyForm);
		app.directive('dropdown', dropdown);
		
		/**
		 * Директива для управления фокусом скрытых инпутов
		 */
		app.directive('focusMe', function($timeout) {
			return {
				scope: { trigger: '=focusMe' },
				link: function(scope, element) {
					scope.$watch('trigger', function(value) {
						value && element[0].focus();
					});
				}
			};
		});
	</script>
</head>
<body ng-app=testCases>
	<div ng-controller=currencyForm>
		<form ng-submit="submit()" class="form-horizontal" novalidate>
			<h3>Currency form</h3>
			<dropdown class=form-item list=list1 selected=selected1></dropdown>
			<dropdown class=form-item list=list2 selected=selected2 ng-if=showFuther></dropdown>
			
			<div class=form-item ng-if=showFuther class='animate-if result'>
				<div ng-repeat='currency in base | filterSelected:selected1:selected2 as results'>
					<pre>{{currency}}</pre>
				</div>
				<div ng-if="results.length == 0">
					<strong>No results found...</strong>
				</div>
			</div>
			<button class=form-item>Submit</button>
		</form>
	</div>
</body>
</html>
